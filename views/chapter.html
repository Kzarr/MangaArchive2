<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Leitura do Mangá</title>
  <link rel="stylesheet" href="/css/style.css">
  <style>
    body {
      background: #111;
      color: #fff;
      font-family: sans-serif;
      text-align: center;
    }

    .page {
      width: 90%;
      max-width: 800px;
      margin: 10px auto;
      box-shadow: 0 0 15px rgba(0,0,0,0.5);
    }

    .page img {
      width: 100%;
      display: block;
    }

    h1, h2 {
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <h1 id="mangaTitle"></h1>
  <h2 id="chapterTitle"></h2>
  <div id="pagesContainer"></div>

  <script>
    const pathParts = window.location.pathname.split('/');
    const slug = pathParts[2];
    const chapter = pathParts[3];

    fetch(`/api/manga/${slug}/${chapter}`)
      .then(res => res.json())
      .then(data => {
        document.getElementById('mangaTitle').textContent = data.mangaTitle;
        document.getElementById('chapterTitle').textContent = data.chapterTitle;

        const container = document.getElementById('pagesContainer');
        for (let i = 1; i <= data.pages; i++) {
          const img = document.createElement('img');
          img.src = `/mangas/${data.folder}/${String(i).padStart(3, '0')}.jpg`;
          const div = document.createElement('div');
          div.classList.add('page');
          div.appendChild(img);
          container.appendChild(div);
        }
      })
      .catch(err => {
        document.body.innerHTML = '<p>Erro ao carregar capítulo.</p>';
        console.error(err);
      });
  </script>
</body>
</html>
